{"ast":null,"code":"var _jsxFileName = \"C:\\\\yoniP\\\\ap2-ex2\\\\Client\\\\src\\\\Chats\\\\Left\\\\ContactListResult\\\\ContactListResult.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport Contact from '../Contact/Contact';\nimport { createElement as _createElement } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function getMsg(id, token) {\n  console.log(id);\n  const response = await fetch('http://localhost:5000/api/Chats/' + id + '/Messages', {\n    method: 'Get',\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': 'Bearer ' + token\n    }\n  });\n  if (response.ok) {\n    const msgArr = await response.json();\n    console.log(msgArr);\n    return msgArr;\n  } else {\n    throw new Error('Invalid username or password');\n  }\n}\nfunction ContactListResult(_ref) {\n  _s();\n  let {\n    contacts,\n    setContactList,\n    token,\n    chatID,\n    setChatID\n  } = _ref;\n  console.log(\"this is:\");\n  console.log(contacts);\n  const deleteContact = async id => {\n    const response = await fetch('http://localhost:5000/api/Chats/' + id, {\n      method: 'DELETE',\n      headers: {\n        'Content-type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    });\n    if (response.ok) {\n      // Update the contacts list after deleting the contact\n      const updatedContacts = contacts.filter(contact => contact.id !== id);\n      setContactList(updatedContacts);\n    }\n  };\n  const attachEventListeners = () => {\n    const chats = document.getElementsByClassName('chats');\n\n    // Add a click event listener to each button\n    for (let i = 0; i < chats.length; i++) {\n      chats[i].addEventListener('click', function () {\n        // Remove the \"active\" class from all buttons\n        for (let j = 0; j < chats.length; j++) {\n          if (chats[j].classList.contains('active')) {\n            chats[j].classList.remove('active');\n          }\n        }\n\n        // Add the \"active\" class to the button that was pressed\n        this.classList.add('active');\n        var idText = this.querySelector('.chatID');\n        var innerText = idText.innerHTML;\n        console.log(\"ya ben zona ya sharmoota\");\n        console.log(innerText);\n      });\n    }\n  };\n  const attachEventListenersMsg = () => {\n    const chats = document.getElementsByClassName('chats');\n\n    // Add a click event listener to each button\n    for (let i = 0; i < chats.length; i++) {\n      chats[i].addEventListener('click', function () {\n        // Remove the \"active\" class from all buttons\n        for (let j = 0; j < chats.length; j++) {\n          if (chats[j].classList.contains('active')) {\n            const contact = contacts[i];\n\n            // Extract the necessary values from the contact\n            const {\n              id,\n              token\n            } = contact;\n\n            // Call the getMsg function with the extracted values\n            getMsg(id, token);\n            getMsg(id, token);\n          }\n        }\n      });\n    }\n  };\n  // Attach event listeners after the component renders\n  useEffect(() => {\n    attachEventListeners();\n  }, [contacts]);\n\n  // useEffect(() => {\n  //   attachEventListenersMsg(contacts.id,contacts.token);\n  // }, [contacts]);\n\n  const userMap = new Map();\n  const uniqueContacts = [];\n\n  // Iterate over contacts to extract unique users\n  for (let i = 0; i < contacts.length; i++) {\n    const contact = contacts[i];\n    const userId = contact.id;\n    const user = contact.user;\n\n    // Check if the user is already added to the map\n    if (!userMap.has(userId)) {\n      userMap.set(userId, user);\n      uniqueContacts.push(contact);\n    }\n  }\n  const contactList = uniqueContacts.map(contact => /*#__PURE__*/_createElement(Contact, {\n    ...contact.user,\n    key: contact.id,\n    token: token,\n    id: contact.id,\n    deleteContact: deleteContact,\n    chatID: chatID,\n    setChatID: setChatID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"users_list\",\n    children: contactList\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 10\n  }, this);\n}\n_s(ContactListResult, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = ContactListResult;\nexport default ContactListResult;\nvar _c;\n$RefreshReg$(_c, \"ContactListResult\");","map":{"version":3,"names":["React","useEffect","Contact","createElement","_createElement","jsxDEV","_jsxDEV","getMsg","id","token","console","log","response","fetch","method","headers","ok","msgArr","json","Error","ContactListResult","_ref","_s","contacts","setContactList","chatID","setChatID","deleteContact","updatedContacts","filter","contact","attachEventListeners","chats","document","getElementsByClassName","i","length","addEventListener","j","classList","contains","remove","add","idText","querySelector","innerText","innerHTML","attachEventListenersMsg","userMap","Map","uniqueContacts","userId","user","has","set","push","contactList","map","key","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","children","_c","$RefreshReg$"],"sources":["C:/yoniP/ap2-ex2/Client/src/Chats/Left/ContactListResult/ContactListResult.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport Contact from '../Contact/Contact';\r\nasync function getMsg(id, token) {\r\n  console.log(id);\r\n  const response = await fetch('http://localhost:5000/api/Chats/' + id + '/Messages', {\r\n    method: 'Get',\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n      'Authorization': 'Bearer ' + token,\r\n    },\r\n  });\r\n\r\n  if (response.ok) {\r\n    const msgArr = await response.json();\r\n    console.log(msgArr);\r\n    return msgArr;\r\n  } else {\r\n    throw new Error('Invalid username or password');\r\n  }\r\n}\r\n\r\nfunction ContactListResult({ contacts, setContactList, token, chatID, setChatID }) {\r\n  console.log(\"this is:\");\r\n  console.log(contacts);\r\n\r\n  const deleteContact = async (id) => {\r\n  \r\n    const response = await fetch('http://localhost:5000/api/Chats/' + id, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n        'Authorization': 'Bearer ' + token,\r\n      },\r\n    });\r\n    if (response.ok) {\r\n     \r\n      // Update the contacts list after deleting the contact\r\n      const updatedContacts = contacts.filter(contact => contact.id !== id);\r\n      setContactList(updatedContacts);\r\n    }\r\n  };\r\n\r\n  const attachEventListeners = () => {\r\n    const chats = document.getElementsByClassName('chats');\r\n\r\n    // Add a click event listener to each button\r\n    for (let i = 0; i < chats.length; i++) {\r\n      chats[i].addEventListener('click', function () {\r\n        // Remove the \"active\" class from all buttons\r\n        for (let j = 0; j < chats.length; j++) {\r\n          if (chats[j].classList.contains('active')) {\r\n            chats[j].classList.remove('active');\r\n          }\r\n        }\r\n\r\n        // Add the \"active\" class to the button that was pressed\r\n        this.classList.add('active');\r\n        var idText = this.querySelector('.chatID');\r\n        var innerText = idText.innerHTML;\r\n        console.log(\"ya ben zona ya sharmoota\")\r\n        console.log(innerText);\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n  const attachEventListenersMsg = () => {\r\n    const chats = document.getElementsByClassName('chats');\r\n\r\n    // Add a click event listener to each button\r\n    for (let i = 0; i < chats.length; i++) {\r\n      chats[i].addEventListener('click', function () {\r\n        // Remove the \"active\" class from all buttons\r\n        for (let j = 0; j < chats.length; j++) {\r\n          if (chats[j].classList.contains('active')) {\r\n            const contact = contacts[i];\r\n\r\n            // Extract the necessary values from the contact\r\n            const { id, token } = contact;\r\n    \r\n            // Call the getMsg function with the extracted values\r\n            getMsg(id, token);\r\n            getMsg(id,token);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n  // Attach event listeners after the component renders\r\n  useEffect(() => {\r\n    attachEventListeners();\r\n  }, [contacts]);\r\n\r\n  // useEffect(() => {\r\n  //   attachEventListenersMsg(contacts.id,contacts.token);\r\n  // }, [contacts]);\r\n\r\n \r\n  const userMap = new Map();\r\n  const uniqueContacts = [];\r\n\r\n  // Iterate over contacts to extract unique users\r\n  for (let i = 0; i < contacts.length; i++) {\r\n    const contact = contacts[i];\r\n    const userId = contact.id;\r\n    const user = contact.user;\r\n\r\n    // Check if the user is already added to the map\r\n    if (!userMap.has(userId)) {\r\n      userMap.set(userId, user);\r\n      uniqueContacts.push(contact);\r\n    }\r\n  }\r\n\r\n  const contactList = uniqueContacts.map((contact) => (\r\n    <Contact {...contact.user} key={contact.id} token={token} id={contact.id} deleteContact={deleteContact} chatID={chatID} setChatID={setChatID} />\r\n  ));\r\n\r\n  return <div className=\"users_list\">{contactList}</div>;\r\n}\r\n\r\nexport default ContactListResult;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}