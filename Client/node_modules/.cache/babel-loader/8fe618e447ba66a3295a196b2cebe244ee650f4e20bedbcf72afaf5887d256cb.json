{"ast":null,"code":"var _jsxFileName = \"C:\\\\yoniP\\\\ap2-ex2\\\\Client\\\\src\\\\Chats\\\\Left\\\\Modal\\\\Modal.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nasync function addContact(Username, token, setContactList, contacts) {\n  if (Username === \"\") {\n    return;\n  }\n  const data = {\n    username: Username\n  };\n  const res = await fetch('http://localhost:5000/api/Chats', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': 'Bearer ' + token\n    },\n    body: JSON.stringify(data)\n  });\n  if (res.ok) {\n    const contact = await res.json();\n    setContactList(contacts => [...contacts, contact]);\n    return true; // Return true indicating success\n  } else if (res.status === 401) {\n    // User already exists with the provided username\n\n    return false; // Return false indicating failure\n  } else {\n    // Other error occurred\n    // Handle the error or display an appropriate message\n    // Example: alert('Failed to register. Please try again later.');\n    return false; // Return false indicating failure\n  }\n}\n\nfunction Modal(_ref) {\n  _s();\n  let {\n    contacts,\n    setContactList,\n    MyUsername,\n    token\n  } = _ref;\n  const history = useNavigate();\n  function handleAddContact() {\n    const usernameInput = document.querySelector('#userToAdd');\n    const username = usernameInput.value;\n    if (!username) {\n      alert('Please enter a username');\n      return;\n    }\n    addContact(username, token, setContactList, contacts).then(success => {\n      if (success) {\n        history(`/Chats`, {\n          state: {\n            username: MyUsername,\n            token: token\n          }\n        });\n      } else {\n        alert('User not found/U tried to add yourself');\n      }\n    }).catch(error => {\n      console.log('Error occurred:', error);\n      // Handle the error or display an appropriate message\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal fade\",\n      id: \"exampleModal\",\n      tabIndex: -1,\n      \"aria-labelledby\": \"exampleModalLabel\",\n      \"aria-hidden\": \"true\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-dialog modal-dialog-centered\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"modal-title fs-5\",\n              id: \"exampleModalLabel\",\n              children: \"Add contact\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-close\",\n              \"data-bs-dismiss\": \"modal\",\n              \"aria-label\": \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text\",\n                id: \"basic-addon1\",\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                placeholder: \"Username\",\n                \"aria-label\": \"Username\",\n                \"aria-describedby\": \"basic-addon1\",\n                id: \"userToAdd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-primary\",\n              onClick: handleAddContact,\n              children: \"Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(Modal, \"UuBpJaL/77ixlr0CeL0xEoy8mog=\", false, function () {\n  return [useNavigate];\n});\n_c = Modal;\nexport default Modal;\nvar _c;\n$RefreshReg$(_c, \"Modal\");","map":{"version":3,"names":["useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","addContact","Username","token","setContactList","contacts","data","username","res","fetch","method","headers","body","JSON","stringify","ok","contact","json","status","Modal","_ref","_s","MyUsername","history","handleAddContact","usernameInput","document","querySelector","value","alert","then","success","state","catch","error","console","log","children","className","id","tabIndex","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/yoniP/ap2-ex2/Client/src/Chats/Left/Modal/Modal.js"],"sourcesContent":["import {useNavigate } from \"react-router-dom\";\r\n\r\n\r\nasync function addContact(Username, token, setContactList, contacts) {\r\n    if (Username === \"\") {\r\n      return;\r\n    }\r\n    const data = {\r\n      username: Username,\r\n    };\r\n  \r\n    const res = await fetch('http://localhost:5000/api/Chats', {\r\n      method: 'post',\r\n      headers: {\r\n        'Content-type': 'application/json',\r\n        'Authorization': 'Bearer ' + token,\r\n      },\r\n      body: JSON.stringify(data)\r\n    });\r\n  \r\n    if (res.ok) {\r\n      const contact = await res.json();\r\n      setContactList((contacts) => [...contacts, contact])\r\n      return true; // Return true indicating success\r\n    } else if (res.status === 401) {\r\n      // User already exists with the provided username\r\n     \r\n\r\n      return false; // Return false indicating failure\r\n    } else {\r\n      // Other error occurred\r\n      // Handle the error or display an appropriate message\r\n      // Example: alert('Failed to register. Please try again later.');\r\n      return false; // Return false indicating failure\r\n    }\r\n  }\r\n  \r\n\r\n  function Modal({ contacts, setContactList, MyUsername, token }) {\r\n    const history = useNavigate();\r\n  \r\n    function handleAddContact() {\r\n      const usernameInput = document.querySelector('#userToAdd');\r\n      const username = usernameInput.value;\r\n  \r\n      if (!username) {\r\n        alert('Please enter a username');\r\n        return;\r\n      }\r\n  \r\n      addContact(username, token, setContactList, contacts)\r\n        .then((success) => {\r\n          if (success) {\r\n            history(`/Chats`, { state: { username: MyUsername, token: token } });\r\n          } else {\r\n            alert('User not found/U tried to add yourself');\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log('Error occurred:', error);\r\n          // Handle the error or display an appropriate message\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className=\"modal fade\"\r\n                id=\"exampleModal\"\r\n                tabIndex={-1}\r\n                aria-labelledby=\"exampleModalLabel\"\r\n                aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-dialog-centered\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <h1 className=\"modal-title fs-5\" id=\"exampleModalLabel\">\r\n                                 Add contact\r\n                            </h1>\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn-close\"\r\n                                data-bs-dismiss=\"modal\"\r\n                                aria-label=\"Close\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"input-group mb-3\">\r\n                                <span className=\"input-group-text\" id=\"basic-addon1\">\r\n                                    Username\r\n                                </span>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Username\"\r\n                                    aria-label=\"Username\"\r\n                                    aria-describedby=\"basic-addon1\"\r\n                                    id=\"userToAdd\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={handleAddContact}>\r\n                                Add\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Modal"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}